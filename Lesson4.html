<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link rel="stylesheet" href="style/html5.css">
</head>
<body>
<content>
<h1 id="textdocument-processor">(Text/Document) Processor</h1>
<p>A document processor is a piece of software that interprets text and transcode its content from one form to another. There are many types of processors, yet for the purpose of this lesson we focus on only two types: (1) <strong>Interpreter</strong> and (2) <strong>Converter</strong>. An interpreter is very similar to your web browser: it gets as input an html file (and related scripts), interprets their syntax and content and display the results on the screen. More generally, an interpreter first parses the content of an input file, then creates its own representation of it and finally performs the commands it has interpreted. In the process, there is a translation stage where the input syntax and content is read (parsed) and transformed into a transitional or median representation. This median representation is then linked to specific commands that are in turn executed locally on the interpreters machine. In the case of the converter, such median representation get transcoded into a specified format with a specific syntax written in a file. For example, an HTML file can be converted into both a PDF <em>and/or</em> a DOC file. Interpreters and converters are ubiquitous systems which are fundamental for both publishing and archiving practices.</p>
<h3 id="goals">Goals</h3>
<p>Assuming that you have a basic knowledge of the Markdown language, in this lesson you will learn how to convert a text file written in markdown to both an HTML and EPUB3 output. In order to do so, you need to instal <a href="http://johnmacfarlane.net/pandoc/">Pandoc</a> on your system as we will be using this specific markdown converter.</p>
<p>The goals of this lesson are:</p>
<ol style="list-style-type: decimal">
<li>Acquire basic understanding of how to employ pandoc to produce both HTML and EPUB output.</li>
<li>Acquire basic knowledge of how pandoc can be tailored to produce other types of output.</li>
</ol>
<h3 id="how">How</h3>
<p>In order to complete this lesson, you should be familiar with how to operated your computer's CLI (<a href="Lesson2.html">Lesson2</a>) and capable of writing markdown valid text (<a href="Lesson3.html">Lesson3</a>).</p>
<p>The following exercises assumes that you have markdown input file ready to convert to both HTML and EPUB. If you don't already, simply use this file (<a href="Lesson4.md">Lesson4.md</a>).</p>
<p>To make sure that your system is set up properly, open a CLI window and type the following</p>
<pre><code>pandoc --version</code></pre>
<p>If you get an error message, this means that you did not install pandoc properly. If so please visit <a href="http://johnmacfarlane.net/pandoc/">Pandoc</a> and install the required software. If not you are ready to go!</p>
<p>Now since pandoc is a document converter its most basic form of usage consists of an <em>input</em> file and an <em>output</em> file.</p>
<p>A command like</p>
<pre><code>pandoc -s Lesson4.md -o Lesson4.html</code></pre>
<p>will produce an <em>output</em> file (-o Lesson4.html) from the <em>input</em> file (<em>Lesson4.md</em>). Here the argument -s will force pandoc to produce an entire valid document rather than a snippet of it.</p>
<p>More formally, the former command could be</p>
<pre><code>pandoc -s -f markdown Lesson4.md -t html5 -o Lesson4.html</code></pre>
<p>meaning the input file (Lesson4.md) is of type &quot;markdown&quot; and the output file (-o Lesson4.html) is of type &quot;html5&quot;. You can basically omit these details if you want, markdown can recognise valid input files while the extension of your output file (here .html) will inform the program on the type of output expected. However, since pandoc has multiple possible output files to choose from, some of them of the same type but of different version (for example html and html5), it is a good practice to specify the type of output.</p>
<p>Now let's simply change the output to the Rich Text Format (rtf)</p>
<pre><code>pandoc -s -f markdown Lesson4.md -t rtf -o Lesson4.rtf</code></pre>
<p>or in a more compact version</p>
<pre><code>pandoc -s Lesson4.md -o Lesson4.rtf</code></pre>
<p>It is indeed very straight forward change output formats. As explained in the beginning of this Lesson, pandoc is a converter which can produce various outputs out of its internal median representation of a parsed input.</p>
<p>More precisely, pandoc can read:</p>
<blockquote>
<p>markdown and (subsets of) Textile, reStructuredText, HTML, LaTeX, MediaWiki markup, TWiki markup, Haddock markup, OPML, Emacs Org-mode, DocBook, txt2tags, EPUB and Word docx</p>
</blockquote>
<p>And from these documents it can write:</p>
<blockquote>
<p>plain text, markdown, reStructuredText, XHTML, HTML 5, LaTeX (including beamer slide shows), ConTeXt, RTF, OPML, DocBook, OpenDocument, ODT, Word docx, GNU Texinfo, MediaWiki markup, DokuWiki markup, Haddock markup, EPUB (v2 or v3), FictionBook2, Textile, groff man pages, Emacs Org-Mode, AsciiDoc, InDesign ICML, and Slidy, Slideous, DZSlides, reveal.js or S5 HTML slide shows. It can also produce PDF output on systems where LaTeX is installed.</p>
</blockquote>
<p>For the purpose of this lesson we will focus on HTML(5) and EPUB(3).</p>
<h4 id="html5">HTML(5)</h4>
<p>Now that we have been experiencing pandoc a little already, we will proceed by directly discussing the pandoc command used to generate this site and explain the options that we have set. To generate this html5 web page issue the following command</p>
<pre><code>pandoc -s Lesson4.md --template=style/template.html5 -c style/html5.css --bibliography=wwwrite.bib -o Lesson4.html</code></pre>
<p>Now refresh your web browser and see if something changed. Perhaps not (yet). You may not realise it but you have (re)generated the entire HTML in a single pandoc command!</p>
<p>As you can see there is a little more arguments in the above pandoc than previously exposed in the first section.</p>
<ol style="list-style-type: decimal">
<li><p>As expected we have</p>
<pre><code>-s Lesson4.md  -o Lesson4.html</code></pre>
<p>which specifies the markdown <em>input</em> (Lesson4.md) and HTML <em>output</em> (Lesson4.html)</p></li>
<li><p>There is a few extra options</p>
<pre><code>--template=style/template.html5 -c style/html5.css --bibliography=wwwrite.bib</code></pre>
<p>which are instructing pandoc to (1) use the HTML5 template &quot;style/template.html5&quot;, (2) use the <a href="https://en.wikipedia.org/wiki/Cascading_Style_Sheets">stylesheet</a> &quot;style/html5.css&quot; and (3) use the bibliographical information in &quot;wwwrite.bib&quot; if in-text referencing is needed.</p></li>
</ol>
<p>Without going in too much details (since this is the topic of <a href="/">Lesson6</a>), the current site employs custom templates and stylesheets (in the directory <a href="style/">&quot;style/&quot;</a>). In these file you will find all the markup code used to (automatically) generate the layout this web page in HTML and <a href="(https://en.wikipedia.org/wiki/Cascading_Style_Sheets)">CSS</a> formats. In a nutshell, on the one hand a template is responsible to instruct how to convert pandoc's median representation into an HTML format while on the other a CSS stylesheet is responsible for the layout and (design) parametrisation of the content of this HTML. Hence, rather than specifying a default pandoc output, we use our own custom templates to generate our own tailored HTML outputs.</p>
<h4 id="epub3">EPUB(3)</h4>
<p>It is worth mentioning at this stage that in previous example, pandoc is converting files written in one markup language &quot;markdown&quot; to another markup language &quot;HTML5&quot;. At its core, EPUB is yet another markup language. Both HTML and EPUB are standard markups that are both interpreted by a web browser and epub reader respectively.</p>
<p>Now here is the pandoc command to generate an epub(3) of the whole site</p>
<pre><code>pandoc -S index.md Lesson1.md Lesson2.md Lesson3.md metadata.epub3.yaml  --toc --template=style/template.epub3 --epub-stylesheet=style/epub3.css --epub-cover-image=img/DSP6.png --bibliography=wwwrite.bib -o WWWRITE.epub  </code></pre>
<p>As you may notice, the command is a bit more &quot;complex&quot; than the previous HTML one, yet basically resembles it in many ways.</p>
<p>The arguments</p>
<pre><code>-S index.md Lesson1.md Lesson2.md Lesson3.md Lesson4.md metadata.epub3.yaml -o WWWRITE.epub  </code></pre>
<p>specify a list of <em>input</em> files (index.md, Lesson1.md, Lesson2.md, Lesson3.md, Lesson4.md, and metadata.epub3.yaml) and an <em>output</em> file (-o WWWRITE.epub). Pandoc will concatenate input files into a single one when listed as inputs. This is convenient as it enables a writer to segment a book into self-contained chapters for example.</p>
<p>Styling and template options are specified with</p>
<pre><code>--template=style/template.epub3 --epub-stylesheet=style/epub3.css  --bibliography=wwwrite.bib</code></pre>
<p>these are exactly the same as in the previous HTML example. In fact, in one looks at the template and CSS you could notice that that are to some extent very similar to the HTML5 ones. This is because the EPUB markup language is based on HTML!</p>
<p>Also notice the</p>
<pre><code>--epub-cover-image=img/DSP6.png</code></pre>
<p>which tells pandoc to use the specified image as cover page for the EPUB.</p>
<p>Finally the argument</p>
<pre><code>--toc</code></pre>
<p>is a feature that instructs pandoc to generate a &quot;Table Of Content&quot; (toc) out of the various markdown Headings (symbol '#' <a href="Lesson3.html">Lesson3</a>) present in the input file(s).</p>
<p>Let's now have a look at the EPUB output!</p>
<h3 id="extra">Extra</h3>
<p><a href="http://johnmacfarlane.net/pandoc/try/">Try pandoc!</a></p>
<p><a href="http://johnmacfarlane.net/pandoc/README.html#epub-metadata">Pandoc User's Guide</a></p>
<p><a href="http://johnmacfarlane.net/pandoc/getting-started.html">Getting Started</a></p>
<div class="references">

</div>
</content>
</body>
</html>
